# Back-End
How-To-Life-Hacker

## Documentation

Base URL for deployed API: https://lifehackerz.herokuapp.com/

## **Endpoints**

| Method | URL | Description | Requires Token |
|--------|-----|-------------|----------------|
| POST | /api/auth/register | register a new user | - |
| POST | /api/auth/login | login as existing user | - |
| POST | /api/howto | create a new howto | X |
| POST | /api/steps | creates a new step | X |
| GET | api/howto | gets all howtos | X |
| GET | /api/howto/:id | gets a specific howto | X |
| GET | /api/howto/:id/steps | gets a specific howtos steps | X |
| GET | /api/steps | gets all steps | X |
| GET | /api/steps/:id | gets a specific step | X |
| PUT | /howto/:id | edit a howto | X |
| PUT | /steps/:id | edit a step | X |
| PUT | /user/:id | edit a user | X |
| DELETE | /howto/:id | delete a howto | X |
| DELETE | /steps/:id | delete a step | X |
| DELETE | /user/:id | delete a user | X |

Note: If you try to delete a user that has authored any how-tos, you will not be able to. You must first delete all of the user's howtos before deleting the user.

## **Table Requirements**

## **User**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| username | string | yes | yes | - |
| email | string | yes | yes | - |
| password | string | yes | no | - |

# **How-To**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| name | string | yes | no | - |
| user_id | integer | yes | no | Must be a valid user's id, this will be the author |

# **Steps**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| name | string | yes | no | - |
| howto_id | integer | yes | no | Must be a valid howto id |


## **Login's**

If i need to update the database at any point during the week all users made up until that point will be deleted. These logins will always be available to use. 
| username |  password | role |
| ----- | -------- | ---- | ---- |
| thisishowwedo | password |
| gottacatchemall | password |
| 1 for reader 2 for editor | role

## **Requests and Returns**

### POST /register
Request body:
```
{
    "username": "testing",
    "password": "newPass",
    "role": 2
}
```
Returns:
```
{
    "message": {
        "id": 3,
        "username": "testing",
        "password": "$2a$08$vAOHsxc3FqTs4nLF0hRX7uu64GY8pYXDRsWRriRS.UH.7H2ahLSY6",
        "role": 2
    }
}
```

### POST /login
Request body:
```
{
  "username": "testing",
  "password": "newPass"
}
```
Returns:
```
{
    "message": "Welcome to our API",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjozLCJ1c2VybmFtZSI6InRlc3RpbmciLCJpYXQiOjE2MDEwMzg5ODgsImV4cCI6MTYwMTIxMTc4OH0.EUEbc2RfYaMWmmuJ1hDvD2GmYNX9UYxD67cRO2TB0xY"
}
```


### POST /howto
Request body:
```
{
    "name":"New how to",
    "user_id":1
}
```
Returns:
```
{
    "id": 3,
    "name": "New how to",
    "user_id": 1
}
```

### POST /steps
Request body:
```
{
        
    "name": "test step",
    "howto_id": 1
}
```
Returns:
```
{
    "id": 5,
    "name": "test step",
    "howto_id": 1
}
```

### GET /howto
Returns:
```
[
    {
        "id": 1,
        "name": "build a castle",
        "user_id": 1
    },
    {
        "id": 2,
        "name": "headstand",
        "user_id": 3
    }
]
```

### GET /howto/:id
Returns:
```
{
    "data": {
        "id": 1,
        "name": "build a castle",
        "user_id": 1
    }
}
```

### GET /howto/:id/steps
Returns:
```
{
    "data": [
        {
            "id": 3,
            "name": "create plan",
            "howto_id": 1
        }
    ]
}
```

### GET /steps
Returns:
```
[
    {
        "id": 2,
        "name": "steady breathing",
        "howto_id": 3
    },
    {
        "id": 3,
        "name": "create plan",
        "howto_id": 1
    }
]
```

### GET /steps/:id
Returns:
```
{
    "id": 2,
    "name": "steady breathing",
    "howto_id": 3
}
```

### GET /user/
Returns:
```
{
    "users": [
        {
            "id": 1,
            "username": "thisishowwedo",
            "email": "thisishowwedo@gmail.com",
            "password": "password"
        },
        {
            "id": 2,
            "username": "gottacatchemall",
            "email": "gottacatchemall@gmail.com",
            "password": "password"
        },
    ]
}
```


### PUT /howto/:id
Request body:
```
{
    "user_id":"2",
    "title":"testing",
    "category":"test",
    "description":"test"
}
```
Returns:
```
{
    "message": "Howto with the id 1 was successfully changed"
}
```

### PUT /steps/:id
Request body:
```
{
    "name": "testing",
    "howto_id": 2 
}
```
Returns:
```
{
    "message": "step updated",
    "data": {
        "id": 4,
        "name": "testing",
        "howto_id": 2
    }
}
```


```

### DELETE /howto/:id
Returns:
```
status 204
{
    "message": "how to deleted"
}
```

### DELETE /steps/:id
Returns:
```
status 204
{
    "message": "step deleted"
}
```

