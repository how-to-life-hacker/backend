# Back-End
How-To-Life-Hacker

## Documentation

Base URL for deployed API: https://lifehackerz.herokuapp.com/

## **Endpoints**

| Method | URL | Description | Requires Token |
|--------|-----|-------------|----------------|
| POST | /api/auth/register | register a new user | - |
| POST | /api/auth/login | login as existing user | - |
| POST | /api/howto | create a new howto | X |
| POST | /api/steps | creates a new step | X |
| GET | api/howto | gets all howtos | X |
| GET | /api/howto/:id | gets a specific howto | X |
| GET | /api/howto/:id/steps | gets a specific howtos steps | X |
| GET | /api/steps | gets all steps | X |
| GET | /api/steps/:id | gets a specific step | X |
| PUT | /howto/:id | edit a howto | X |
| PUT | /steps/:id | edit a step | X |
| PUT | /user/:id | edit a user | X |
| DELETE | /howto/:id | delete a howto | X |
| DELETE | /steps/:id | delete a step | X |
| DELETE | /user/:id | delete a user | X |

Note: If you try to delete a user that has authored any how-tos, you will not be able to. You must first delete all of the user's howtos before deleting the user.

## **Table Requirements**

## **User**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| username | string | yes | yes | - |
| email | string | yes | yes | - |
| password | string | yes | no | - |

# **How-To**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| title | string | yes | no | - |
| category | string | yes | no | - |
| description | string | yes | no | - |
| user_id | integer | yes | no | Must be a valid user's id, this will be the author |

# **Steps**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| howto_id | integer | yes | no | Must be a valid howto id |
| description | string | yes | no | - |

## **Login's**

If i need to update the database at any point during the week all users made up until that point will be deleted. These logins will always be available to use. Users have the choice to login with either username or email.
| username | email | password |
| ----- | -------- | ---- |
| thisishowwedo | thisishowwedo@gmail.com | password |
| gottacatchemall | gottacatchemall@gmail.com | password |

## **Requests and Returns**

### POST /register
Request body:
```
{
    "username": "test",
    "email": "test@gmail.com,
    "password": "password"
}
```
Returns:
```
{
    "data": {
        "id": 10,
        "username": "test",
        "email": "test@gmail.com",
        "password": "$2a$08$LxYkKoSLPQc4wBoGmagqquC.H1GPbauvXasanIvVLkN8hAZhGriyG"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjoxMCwidXNlcm5hbWUiOiJ0ZXN0IiwiZW1haWwiOiJ0ZXN0QGdtYWlsLmNvbSIsImlhdCI6MTYwMDc5MTczMywiZXhwIjoxNjAwODIwNTMzfQ.4o4JluGl3OE-wI3ALcO3GhAGvIvmM5mfWMYcJjOEU54"
}
```

### POST /login
Request body:
```
{
    "username": "test",
    "email": "test@gmail.com,
    "password": "password"
}
```
Returns:
```
{
    "message": "Welsome to our API",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjoxMCwidXNlcm5hbWUiOiJ0ZXN0IiwiZW1haWwiOiJ0ZXN0QGdtYWlsLmNvbSIsImlhdCI6MTYwMDc5MTc5NSwiZXhwIjoxNjAwODIwNTk1fQ.PUe65QPPUEFMawIkLum4ymRB8cu9IZiQ5efZfV0R-dA"
}
```


### POST /howto
Request body:
```
{
    "title":"New how to",
    "category":"New category",
    "description":"New description",
    "user_id":1
}
```
Returns:
```
{
    "message": "Congrats, you added a new howto",
    "addition": {
        "id": 4,
        "title": "New how to",
        "category": "New category",
        "description": "New description",
        "user_id": 1
    }
}
```

### POST /steps
Request body:
```
{
    "howto_id":4,
    "description":"test"
}
```
Returns:
```
{
    "message": "Congrats, you added a new step",
    "addition": {
        "id": 15,
        "howto_id": 4,
        "description": "test"
    }
}
```

### GET /howto
Returns:
```
{
    "howto": [
        {
            "id": 1,
            "title": "How to Register to Vote",
            "category": "Voting",
            "description": "If you're eligible, it's part of your civic duty to vote on Election Day. ",
            "user_id": 1
        },
        {
            "id": 2,
            "title": "How to Make a Great Pokemon Team",
            "category": "Pokemon",
            "description": "Do you feel like after becoming the champion, there's something wrong? Is that gym leader/Pokémon League member driving you nuts? Well, here's a guide on how to fix that!",
            "user_id": 2
        },
        {
            "id": 3,
            "title": "How to Find Out if You Have Already Had Coronavirus",
            "category": "COVID 19",
            "description": "To see if you’ve had COVID-19 in the past, you can get an antibody test from your local healthcare provider. ",
            "user_id": 1
        },
        {
            "id": 4,
            "title": "New how to",
            "category": "New category",
            "description": "New description",
            "user_id": 1
        }
    ]
}
```

### GET /howto/:id
Returns:
```
{
    "howto": {
        "id": 1,
        "title": "How to Register to Vote",
        "category": "Voting",
        "description": "If you're eligible, it's part of your civic duty to vote on Election Day. ",
        "user_id": 1
    }
}
```

### GET /howto/:id/steps
Returns:
```
[
    {
        "title": "How to Register to Vote",
        "category": "Voting",
        "step": "Follow the registration guidelines for the state you live and will vote in."
    },
    {
        "title": "How to Register to Vote",
        "category": "Voting",
        "step": "Confirm you're eligible to vote based on your age and citizenship status."
    },
    {
        "title": "How to Register to Vote",
        "category": "Voting",
        "step": "Check your state's additional eligibility laws"
    },
    {
        "title": "How to Register to Vote",
        "category": "Voting",
        "step": "Note your state's registration deadline"
    }
]
```

### GET /steps
Returns:
```
{
    "steps": [
        {
            "id": 1,
            "howto_id": 1,
            "description": "Follow the registration guidelines for the state you live and will vote in."
        },
        {
            "id": 2,
            "howto_id": 1,
            "description": "Confirm you're eligible to vote based on your age and citizenship status."
        },
        {
            "id": 3,
            "howto_id": 1,
            "description": "Check your state's additional eligibility laws"
        },
        {
            "id": 4,
            "howto_id": 1,
            "description": "Note your state's registration deadline"
        },
        {
            "id": 5,
            "howto_id": 2,
            "description": "Pick your starter. Your starter Pokémon is the core of your party (generally). "
        },
        {
            "id": 6,
            "howto_id": 2,
            "description": "Learn about your party."
        },
        {
            "id": 7,
            "howto_id": 2,
            "description": "Practice different movesets on all the Pokémon. Also, it might not be best to have all legendaries. Use good Pokémon that you like."
        },
    ]
}
```

### GET /steps/:id
Returns:
```
{
    "steps": {
        "id": 1,
        "howto_id": 1,
        "description": "Follow the registration guidelines for the state you live and will vote in."
    }
}
```

### GET /user/
Returns:
```
{
    "users": [
        {
            "id": 1,
            "username": "thisishowwedo",
            "email": "thisishowwedo@gmail.com",
            "password": "password"
        },
        {
            "id": 2,
            "username": "gottacatchemall",
            "email": "gottacatchemall@gmail.com",
            "password": "password"
        },
    ]
}
```

### GET /user/:id
Returns:
```
{
    "user": {
        "id": 1,
        "username": "thisishowwedo",
        "email": "thisishowwedo@gmail.com",
        "password": "password"
    }
}
```

### GET /user/:id/howto
Returns:
```
{
    "userHowto": [
        {
            "username": "thisishowwedo",
            "email": "thisishowwedo@gmail.com",
            "title": "How to Register to Vote"
        },
        {
            "username": "thisishowwedo",
            "email": "thisishowwedo@gmail.com",
            "title": "How to Find Out if You Have Already Had Coronavirus"
        },
        {
            "username": "thisishowwedo",
            "email": "thisishowwedo@gmail.com",
            "title": "New how to"
        }
    ]
}
```

### PUT /howto/:id
Request body:
```
{
    "user_id":"2",
    "title":"testing",
    "category":"test",
    "description":"test"
}
```
Returns:
```
{
    "message": "Howto with the id 1 was successfully changed"
}
```

### PUT /steps/:id
Request body:
```
{
    "howto_id":"3",
    "description":"testing"
}
```
Returns:
```
{
    "message": "Step with the id 1 was successfully changed"
}
```

### PUT /user/:id
Request body:
```
{
    "username":"changed",
    "email":"change@test.com",
    "password":"password123"
}
```
Returns:
```
{
    "message": "User with the id 4 was successfully changed"
}
```

### DELETE /howto/:id
Returns:
```
status 204
```

### DELETE /steps/:id
Returns:
```
status 204
```

### DELETE /user/:id
Returns:
```
status 204
```
